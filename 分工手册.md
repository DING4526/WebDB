# 抗战胜利80周年专题网站 - 团队分工手册

本项目由四位成员协作完成，采用前后端分离（逻辑层面）的开发模式。以下是详细的职责分工与代码贡献说明。

## 1. 团队成员与职责概览

| 成员姓名 | 学号 | 角色 | 主要职责 |
| :--- | :--- | :--- | :--- |
| **Ding** | **2310724** | **后端/架构** | 数据库设计、后台管理系统、公共模型、留言/日志模块、整体布局 |
| **liyu** | **2311591** | **前端-时间轴** | 抗战大事记时间轴展示、事件详情页、多媒体轮播 |
| **苏奕扬** | **2311330** | **前端-人物库** | 抗战人物列表、人物详情页、人物关联数据展示 |
| **孔祥昊** | **2311439** | **前端-地图** | 抗战地图可视化、按地点筛选事件、地图交互接口 |

---

## 2. 详细分工与代码实现

### 2.1 后端与基础架构 (Ding - 2310724)

负责项目的地基搭建，确保数据流转通畅，并提供后台管理界面供管理员维护数据。

*   **核心代码文件**：
    *   `common/config/main.php`: 全局配置（数据库、时区 `Asia/Shanghai`、语言包）。
    *   `common/models/*`: 定义所有数据模型。
        *   `WarPerson.php`: 人物模型，关联事件与媒体。
        *   `WarEvent.php`: 事件模型，关联人物与阶段。
        *   `WarMessage.php`: 留言模型，处理审核状态。
        *   `WarVisitLog.php`: 访问日志模型，记录用户足迹。
    *   `backend/controllers/*`: 后台 CRUD 控制器。
    *   `backend/views/layouts/main.php`: 集成 **AbsoluteAdmin** 后台模板。
    *   `frontend/views/layouts/main.php`: 前台主布局文件。
    *   `frontend/controllers/MessageController.php`: 留言板逻辑。

*   **主要贡献**：
    *   搭建 Yii2 Advanced 框架环境。
    *   设计数据库表结构 (`war_person`, `war_event`, `war_media` 等)。
    *   实现后台对人物、事件、媒体资源的增删改查。
    *   实现前台留言提交与后台审核机制。

### 2.2 时间轴模块 (liyu - 2311591)

负责以时间为线索，串联抗战历史事件，提供直观的历史演进视图。

*   **核心代码文件**：
    *   `frontend/controllers/TimelineController.php`: 处理时间轴数据查询，按阶段 (`WarStage`) 分组。
    *   `frontend/views/timeline/index.php`: 时间轴主页面。
        *   实现垂直时间轴布局。
        *   使用 CSS 伪元素绘制时间节点。
    *   `frontend/views/timeline/view.php`: 事件详情页。
        *   集成 Bootstrap Carousel 实现多图轮播。
        *   展示关联人物头像列表。
    *   `frontend/web/css/timeline-style.css`: 自定义时间轴样式。

*   **主要贡献**：
    *   设计并实现响应式垂直时间轴。
    *   实现事件详情页的多媒体展示（图片轮播、相关文章链接）。
    *   优化页面交互体验。

### 2.3 人物库模块 (苏奕扬 - 2311330)

负责展示抗战英雄与重要人物，通过卡片墙和详情页展现人物生平。

*   **核心代码文件**：
    *   `frontend/controllers/PersonController.php`: 人物列表与详情逻辑。
        *   实现 `actionView` 中的访问日志记录 (`WarVisitLog`)。
        *   实现详情页的留言提交处理。
    *   `frontend/views/person/index.php`: 人物列表页。
        *   实现**红色主题**卡片式布局。
        *   左侧侧边栏实现按 `role_type` (将领/烈士等) 筛选。
        *   优化分页器样式。
    *   `frontend/views/person/view.php`: 人物详情页。
        *   双栏布局：左侧头像+简介+文献，右侧生平+事件+留言。
        *   实现生平文本的自动段落缩进处理。
        *   集成相关文章展示栏目。

*   **主要贡献**：
    *   完成人物库的 UI 设计与实现（红色庄重风格）。
    *   实现人物与事件、文章的关联展示。
    *   集成留言互动与访问统计功能。

### 2.4 地图可视化模块 (孔祥昊 - 2311439)

负责基于地理位置展示抗战事件，提供空间维度的历史视角。

*   **核心代码文件**：
    *   `frontend/controllers/EventController.php`: 地图数据接口。
        *   `actionIndex`: 提供 `get-active-locations` 接口，返回含数据的地点列表。
        *   处理按地点 (`location`) 筛选事件的逻辑。
    *   `frontend/views/event/index.php` (推测): 地图展示页面。
        *   集成 ECharts 或地图 API。
        *   实现点击地图省份/地点跳转或显示该地点的抗战事件列表。

*   **主要贡献**：
    *   实现后端数据到前端地图组件的 JSON 接口。
    *   实现按地域维度的历史事件聚合与展示。

---

## 3. 协作流程

1.  **需求确认**：团队在 Tower 上拆解功能模块。
2.  **接口约定**：后端 (Ding) 确定数据库字段与 Model 关联，前端成员 (liyu, 苏奕扬, 孔祥昊) 根据 Model 进行页面开发。
3.  **代码合并**：
    *   各成员在本地开发完成后，提交至 Git 仓库。
    *   解决 `common/models` 或 `assets` 可能产生的冲突。
4.  **联调测试**：
    *   测试人物详情页点击相关事件是否能跳转至时间轴详情页。
    *   测试地图点击地点是否能正确筛选出事件列表。

---

## 4. 目录结构说明

```text
d:\xampp\htdocs\advanced\
 backend/                # 后台 (Ding)
 common/                 # 公共模型 (Ding)
 frontend/
    controllers/
       EventController.php    # 地图 (孔祥昊)
       MessageController.php  # 留言 (Ding)
       PersonController.php   # 人物 (苏奕扬)
       TimelineController.php # 时间轴 (liyu)
    views/
        event/          # 地图视图
        person/         # 人物视图
        timeline/       # 时间轴视图
 ...
```
